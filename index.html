<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Storm Surge Weather</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>â›ˆ</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-logo">
    <span class="logo-bolt">â›ˆ</span>
    <span class="logo-name">StormSurge</span>
    <button class="sidebar-x" id="sidebarX">âœ•</button>
  </div>
  <div class="user-card">
    <div class="user-ava">SS</div>
    <div>
      <div class="user-nm">Weather User</div>
      <div class="user-pl">Pro Plan</div>
    </div>
    <div class="dot-online"></div>
  </div>
  <nav class="sidenav">
    <a href="#" class="sni active" data-p="home"><span>âŒ‚</span> Dashboard</a>
    <a href="#" class="sni" data-p="alerts"><span>â—ˆ</span> Alerts <em id="navAlertBadge">0</em></a>
    <a href="#" class="sni" data-p="settings"><span>â—</span> Settings</a>
  </nav>
  <div class="sidebar-bottom">
    <label class="dark-row">
      <span>Dark Mode</span>
      <label class="tog"><input type="checkbox" id="darkToggle" checked><span class="tog-t"></span></label>
    </label>
    <div class="ver-badge">v9.0 LIVE</div>
  </div>
</aside>

<!-- MAIN -->
<main class="main">
  <header class="topbar">
    <div class="tb-left">
      <button class="burger" id="burger"><span></span><span></span><span></span></button>
      <div class="loc-chip">
        <div class="loc-tag">LOCATION</div>
        <div class="loc-val" id="locName">New York</div>
      </div>
    </div>
    <div class="tb-mid">
      <div class="searchbox">
        <span class="s-ico">âŒ•</span>
        <input id="searchInput" type="text" placeholder="Search city or zip..." autocomplete="off" spellcheck="false">
        <div class="s-drop" id="searchDrop"></div>
      </div>
    </div>
    <div class="tb-right">
      <div class="live-pill"><span class="live-dot"></span>LIVE</div>
      <div class="date-pill" id="datePill">â€”</div>
      <button class="tb-btn" id="geoBtn" title="My location">â—</button>
      <button class="tb-btn" id="refreshBtn" title="Refresh">â†»</button>
    </div>
  </header>

  <div class="layerbar">
    <button class="lb active" data-layer="precipitation">ğŸŒ§ Radar</button>
    <button class="lb" data-layer="temperature">ğŸŒ¡ Temp</button>
    <button class="lb" data-layer="wind">ğŸ’¨ Wind</button>
    <button class="lb" data-layer="clouds">â˜ Clouds</button>
    <button class="lb" data-layer="pressure">ğŸ“Š Pressure</button>
    <div class="lb-spacer"></div>
    <button class="lb style-btn" id="styleBtn">â—‘ Map Style</button>
  </div>

  <div class="mapzone" id="mapzone">
    <div id="map"></div>
    <canvas id="radarCanvas"></canvas>

    <!-- WEATHER CARD -->
    <div class="wcard" id="wcard">
      <div class="wc-top">
        <div>
          <div class="wc-temp" id="wcTemp">--Â°C</div>
          <div class="wc-loc" id="wcLoc">New York</div>
          <div class="wc-desc" id="wcDesc">â€”</div>
        </div>
        <div class="wc-icon" id="wcIcon">ğŸŒ¡</div>
      </div>
      <div class="wc-bar"></div>
      <div class="wc-grid">
        <div class="wc-stat"><div class="wcs-l">Feels Like</div><div class="wcs-v" id="wcFeels">--</div></div>
        <div class="wc-stat"><div class="wcs-l">Humidity</div><div class="wcs-v" id="wcHum">--</div></div>
        <div class="wc-stat"><div class="wcs-l">Wind</div><div class="wcs-v" id="wcWind">--</div></div>
        <div class="wc-stat"><div class="wcs-l">Direction</div><div class="wcs-v" id="wcDir">--</div></div>
        <div class="wc-stat"><div class="wcs-l">Rain</div><div class="wcs-v" id="wcRain">--</div></div>
        <div class="wc-stat"><div class="wcs-l">Pressure</div><div class="wcs-v" id="wcPres">--</div></div>
        <div class="wc-stat"><div class="wcs-l">Cloud Cover</div><div class="wcs-v" id="wcCloud">--</div></div>
        <div class="wc-stat"><div class="wcs-l">UV Index</div><div class="wcs-v" id="wcUV">--</div></div>
      </div>
      <div class="wc-bar"></div>
      <div class="wc-sun">
        <span>ğŸŒ…</span><span id="wcSunrise">--:--</span>
        <span>ğŸŒ‡</span><span id="wcSunset">--:--</span>
      </div>
    </div>

    <!-- LEGEND -->
    <div class="legend" id="legend">
      <div class="leg-title" id="legTitle">mm/h</div>
      <div class="leg-bar" id="legBar"></div>
      <div class="leg-nums"><span>60</span><span>32</span><span>10</span><span>1</span><span>0</span></div>
    </div>

    <!-- MAP BTNS -->
    <div class="mapbtns">
      <button id="zoomIn">ï¼‹</button>
      <button id="zoomOut">ï¼</button>
    </div>

    <!-- CROSSHAIR -->
    <div class="crosshair" id="crosshair">
      <div class="ch-h"></div>
      <div class="ch-v"></div>
      <div class="ch-ring"></div>
    </div>

    <!-- TIME BAR -->
    <div class="timebar">
      <button class="t-arr" id="tPrev">â€¹</button>
      <div class="tslots" id="tSlots"></div>
      <button class="t-arr" id="tNext">â€º</button>
      <button class="playbtn" id="playBtn">â–¶</button>
    </div>

    <!-- FORECAST -->
    <div class="fcast">
      <div class="fc-tabs">
        <button class="fct active" data-ft="hourly">24 Hour</button>
        <button class="fct" data-ft="daily">7 Day</button>
      </div>
      <div class="fc-scroll" id="fcScroll"></div>
    </div>
  </div>
</main>

<!-- RIGHT PANEL -->
<aside class="rpanel" id="rpanel">
  <div class="rp-head">
    <button class="rpt active" data-rt="alerts">Alerts <span class="rpt-badge danger" id="alertBadge">0</span></button>
    <button class="rpt" data-rt="info">Radar Info</button>
  </div>
  <div class="rp-body" id="alertsBody">
    <div class="empty-s"><div class="es-ico">âœ“</div><div>Loading alerts...</div></div>
  </div>
</aside>

<!-- ALERT MODAL -->
<div class="modal" id="alertModal">
  <div class="mbox">
    <div class="mbox-head">
      <div class="mbox-title" id="mTitle">Alert</div>
      <button class="mbox-x" id="mClose">âœ•</button>
    </div>
    <div class="mbox-body" id="mBody"></div>
  </div>
</div>

<!-- SETTINGS MODAL -->
<div class="modal" id="settingsModal">
  <div class="mbox wide">
    <div class="mbox-head">
      <div class="mbox-title">âš™ Settings</div>
      <button class="mbox-x" id="sClose">âœ•</button>
    </div>
    <div class="mbox-body">
      <div class="s-sec">
        <div class="s-sec-title">Units</div>
        <div class="s-row"><span>Temperature</span>
          <div class="seg" id="sTempUnit">
            <button class="sb active" data-v="C">Â°C</button>
            <button class="sb" data-v="F">Â°F</button>
          </div>
        </div>
        <div class="s-row"><span>Wind Speed</span>
          <div class="seg" id="sWindUnit">
            <button class="sb active" data-v="ms">m/s</button>
            <button class="sb" data-v="kmh">km/h</button>
            <button class="sb" data-v="mph">mph</button>
          </div>
        </div>
      </div>
      <div class="s-sec">
        <div class="s-sec-title">Radar</div>
        <div class="s-row"><span>Opacity</span>
          <div class="slider-row">
            <input type="range" id="sOpacity" min="20" max="100" value="75">
            <span id="sOpacityVal">75%</span>
          </div>
        </div>
        <div class="s-row"><span>Animation Speed</span>
          <div class="seg" id="sSpeed">
            <button class="sb" data-v="300">Slow</button>
            <button class="sb active" data-v="600">Normal</button>
            <button class="sb" data-v="1000">Fast</button>
          </div>
        </div>
        <div class="s-row"><span>Auto-play on Load</span>
          <label class="tog"><input type="checkbox" id="sAutoPlay"><span class="tog-t"></span></label>
        </div>
      </div>
      <div class="s-sec">
        <div class="s-sec-title">Map</div>
        <div class="s-row"><span>Show Alert Zones</span>
          <label class="tog"><input type="checkbox" id="sAlertZones" checked><span class="tog-t"></span></label>
        </div>
        <div class="s-row"><span>Show Crosshair</span>
          <label class="tog"><input type="checkbox" id="sCrosshair" checked><span class="tog-t"></span></label>
        </div>
      </div>
      <div class="s-sec">
        <div class="s-sec-title">About</div>
        <div class="about-box">
          <div>Storm Surge Weather <strong>v9.0</strong></div>
          <div>Radar â€” RainViewer API</div>
          <div>Forecast â€” Open-Meteo (free, no key needed)</div>
          <div>Alerts â€” NOAA / NWS weather.gov</div>
          <div>Maps â€” Mapbox GL JS</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>
<!-- LOADER -->
<div class="loader" id="loader"><div class="spin"></div><div class="load-txt">Loading...</div></div>

<!-- Scripts: Mapbox MUST be before app.js -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
<script>
  // Replace with your Mapbox token
  const MAPBOX_TOKEN = "pk.eyJ1Ijoic3Ryb21zdXJnZSIsImEiOiJjbG9oZ2V4c3YwMDF0M2VwZzJ6dG9jIn0.5n8sK8qjHkLhXkKp7l7jQ";
</script>
<script src="app.js"></script>
</body>
</html>