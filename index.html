<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Storm Surge Weather</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>â›ˆ</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-logo">
    <span class="logo-bolt">â›ˆ</span>
    <span class="logo-name">StormSurge</span>
    <button class="sidebar-x" id="sidebarX">âœ•</button>
  </div>
  <div class="user-card">
    <div class="user-ava" id="userAva">SS</div>
    <div>
      <div class="user-nm" id="userNm">Weather User</div>
      <div class="user-sub" id="userSub">Not signed in</div>
    </div>
    <div class="dot-online"></div>
  </div>
  <nav class="sidenav">
    <a href="#" class="sni active" data-p="home"><span>âŒ‚</span> Dashboard</a>
    <a href="#" class="sni" data-p="alerts"><span>â—ˆ</span> Alerts <em id="navAlertBadge">0</em></a>
    <a href="#" class="sni" data-p="storm-central"><span>âš¡</span> Storm Central</a>
    <a href="#" class="sni" data-p="traffic"><span>ğŸ“·</span> Traffic Cams</a>
    <a href="#" class="sni" data-p="settings"><span>â—</span> Settings</a>
  </nav>
  <div class="sidebar-bottom">
    <button class="theme-row" id="themeBtn">
      <span id="themeIcon">ğŸŒ™</span>
      <span id="themeLabel">Dark Mode</span>
      <div class="tog-mini" id="themeTog"></div>
    </button>
    <div class="ver-badge">v10.0 LIVE</div>
  </div>
</aside>

<!-- MAIN -->
<main class="main">
  <header class="topbar">
    <div class="tb-left">
      <button class="burger" id="burger"><span></span><span></span><span></span></button>
      <div class="loc-chip">
        <div class="loc-tag">LOCATION</div>
        <div class="loc-val" id="locName">New York</div>
      </div>
    </div>
    <div class="tb-mid">
      <div class="searchbox">
        <span class="s-ico">âŒ•</span>
        <input id="searchInput" type="text" placeholder="Search city or zip..." autocomplete="off" spellcheck="false">
        <div class="s-drop" id="searchDrop"></div>
      </div>
    </div>
    <div class="tb-right">
      <div class="live-pill"><span class="live-dot"></span>LIVE</div>
      <div class="date-pill" id="datePill">â€”</div>
      <button class="tb-btn" id="geoBtn" title="My location">â—</button>
      <button class="tb-btn" id="drawBtn" title="Draw on map" data-active="false">âœ</button>
      <button class="tb-btn" id="refreshBtn" title="Refresh">â†»</button>
    </div>
  </header>

  <div class="layerbar">
    <button class="lb active" data-layer="precipitation">ğŸŒ§ Radar</button>
    <button class="lb" data-layer="temperature">ğŸŒ¡ Temp</button>
    <button class="lb" data-layer="wind">ğŸ’¨ Wind</button>
    <button class="lb" data-layer="clouds">â˜ Clouds</button>
    <button class="lb" data-layer="pressure">ğŸ“Š Pressure</button>
    <div class="lb-spacer"></div>
    <button class="lb style-btn" id="styleBtn">â—‘ Map Style</button>
  </div>

  <!-- DRAW TOOLBAR (hidden by default) -->
  <div class="draw-toolbar" id="drawToolbar">
    <span class="dt-label">âœ Draw Mode</span>
    <div class="dt-colors">
      <button class="dc active" data-c="#f0a500" style="background:#f0a500"></button>
      <button class="dc" data-c="#ff5c5c" style="background:#ff5c5c"></button>
      <button class="dc" data-c="#00d4c8" style="background:#00d4c8"></button>
      <button class="dc" data-c="#ffffff" style="background:#ffffff"></button>
      <button class="dc" data-c="#22c55e" style="background:#22c55e"></button>
    </div>
    <div class="dt-sizes">
      <button class="ds active" data-s="3">S</button>
      <button class="ds" data-s="6">M</button>
      <button class="ds" data-s="12">L</button>
    </div>
    <button class="dt-btn" id="drawUndo">â†© Undo</button>
    <button class="dt-btn" id="drawClear">ğŸ—‘ Clear</button>
    <button class="dt-btn danger" id="drawExit">âœ• Exit</button>
  </div>

  <div class="mapzone" id="mapzone">
    <div id="map"></div>
    <canvas id="radarCanvas"></canvas>
    <canvas id="drawCanvas"></canvas>

    <!-- WEATHER CARD -->
    <div class="wcard" id="wcard">
      <div class="wc-top">
        <div>
          <div class="wc-temp" id="wcTemp">--Â°C</div>
          <div class="wc-loc" id="wcLoc">New York</div>
          <div class="wc-desc" id="wcDesc">â€”</div>
        </div>
        <div class="wc-icon" id="wcIcon">ğŸŒ¡</div>
      </div>
      <div class="wc-bar"></div>
      <div class="wc-grid" id="wcGrid">
        <div class="wc-stat" id="statFeels"><div class="wcs-l">Feels Like</div><div class="wcs-v" id="wcFeels">--</div></div>
        <div class="wc-stat" id="statHum"><div class="wcs-l">Humidity</div><div class="wcs-v" id="wcHum">--</div></div>
        <div class="wc-stat" id="statWind"><div class="wcs-l">Wind</div><div class="wcs-v" id="wcWind">--</div></div>
        <div class="wc-stat" id="statDir"><div class="wcs-l">Direction</div><div class="wcs-v" id="wcDir">--</div></div>
        <div class="wc-stat" id="statRain"><div class="wcs-l">Rain</div><div class="wcs-v" id="wcRain">--</div></div>
        <div class="wc-stat" id="statPres"><div class="wcs-l">Pressure</div><div class="wcs-v" id="wcPres">--</div></div>
        <div class="wc-stat" id="statCloud"><div class="wcs-l">Cloud Cover</div><div class="wcs-v" id="wcCloud">--</div></div>
        <div class="wc-stat" id="statUV"><div class="wcs-l">UV Index</div><div class="wcs-v" id="wcUV">--</div></div>
      </div>
      <div class="wc-bar"></div>
      <div class="wc-sun" id="statSun">
        <span>ğŸŒ…</span><span id="wcSunrise">--:--</span>
        <span>ğŸŒ‡</span><span id="wcSunset">--:--</span>
      </div>
    </div>

    <!-- LEGEND -->
    <div class="legend" id="legend">
      <div class="leg-title" id="legTitle">mm/h</div>
      <div class="leg-bar" id="legBar"></div>
      <div class="leg-nums"><span>60</span><span>32</span><span>10</span><span>1</span><span>0</span></div>
    </div>

    <!-- MAP BTNS -->
    <div class="mapbtns">
      <button id="zoomIn">ï¼‹</button>
      <button id="zoomOut">ï¼</button>
    </div>

    <!-- CROSSHAIR -->
    <div class="crosshair" id="crosshair">
      <div class="ch-h"></div><div class="ch-v"></div><div class="ch-ring"></div>
    </div>

    <!-- TIME BAR -->
    <div class="timebar">
      <button class="t-arr" id="tPrev">â€¹</button>
      <div class="tslots" id="tSlots"></div>
      <button class="t-arr" id="tNext">â€º</button>
      <button class="playbtn" id="playBtn">â–¶</button>
    </div>

    <!-- FORECAST -->
    <div class="fcast">
      <div class="fc-tabs">
        <button class="fct active" data-ft="hourly">24 Hour</button>
        <button class="fct" data-ft="daily">7 Day</button>
      </div>
      <div class="fc-scroll" id="fcScroll"></div>
    </div>
  </div>
</main>

<!-- RIGHT PANEL -->
<aside class="rpanel" id="rpanel">
  <div class="rp-head">
    <button class="rpt active" data-rt="alerts">Alerts <span class="rpt-badge danger" id="alertBadge">0</span></button>
    <button class="rpt" data-rt="info">Radar</button>
  </div>
  <div class="rp-body" id="alertsBody">
    <div class="empty-s"><div class="es-ico">âœ“</div><div>Loading alerts...</div></div>
  </div>
</aside>

<!-- NWS / ALERT MODAL -->
<div class="modal" id="alertModal">
  <div class="mbox large">
    <div class="mbox-head">
      <div class="mbox-title" id="mTitle">Alert</div>
      <button class="mbox-x" id="mClose">âœ•</button>
    </div>
    <div class="mbox-body" id="mBody"></div>
  </div>
</div>

<!-- STORM CENTRAL MODAL -->
<div class="modal" id="stormCentralModal">
  <div class="mbox large">
    <div class="mbox-head">
      <div class="mbox-title">âš¡ Storm Central</div>
      <button class="mbox-x" id="scClose">âœ•</button>
    </div>
    <div class="mbox-body sc-body">
      <!-- Auth gate (shown when not logged in) -->
      <div id="scAuthGate">
        <div class="sc-auth-tabs">
          <button class="sc-at active" data-at="login">Sign In</button>
          <button class="sc-at" data-at="register">Create Account</button>
        </div>
        <div id="scLogin" class="sc-form">
          <input class="sc-input" id="loginEmail" type="email" placeholder="Email">
          <input class="sc-input" id="loginPass" type="password" placeholder="Password">
          <button class="sc-submit" id="loginBtn">Sign In</button>
          <div class="sc-err" id="loginErr"></div>
        </div>
        <div id="scRegister" class="sc-form" style="display:none">
          <input class="sc-input" id="regName" type="text" placeholder="Display name">
          <input class="sc-input" id="regEmail" type="email" placeholder="Email">
          <input class="sc-input" id="regPass" type="password" placeholder="Password (min 6 chars)">
          <button class="sc-submit" id="registerBtn">Create Account</button>
          <div class="sc-err" id="regErr"></div>
        </div>
        <div class="sc-note"> credentials are stored locally and never sent to any server.<br>Storm Central posts are shared publicly.</div>
      </div>
      <!-- Feed (shown when logged in) -->
      <div id="scFeed" style="display:none">
        <div class="sc-user-bar">
          <span id="scUserLabel">Posting as <strong></strong></span>
          <button class="sc-signout" id="scSignout">Sign out</button>
        </div>
        <div class="sc-compose">
          <textarea class="sc-textarea" id="scText" placeholder="Share a weather discovery... What did you observe? Include your location!"></textarea>
          <div class="sc-compose-meta">
            <span class="sc-loc-tag" id="scLocTag">ğŸ“ <span id="scPostLoc">New York</span></span>
            <div class="sc-compose-btns">
              <label class="sc-img-btn">ğŸ“· Photo <input type="file" id="scImgInput" accept="image/*" style="display:none"></label>
              <button class="sc-submit" id="scPostBtn">Post âš¡</button>
            </div>
          </div>
          <div id="scImgPreview" class="sc-img-preview"></div>
        </div>
        <div class="sc-posts" id="scPosts">
          <div class="empty-s"><div class="es-ico">âš¡</div><div>Loading posts...</div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TRAFFIC CAMS MODAL -->
<div class="modal" id="trafficModal">
  <div class="mbox large">
    <div class="mbox-head">
      <div class="mbox-title">ğŸ“· Traffic Cameras</div>
      <button class="mbox-x" id="tcClose">âœ•</button>
    </div>
    <div class="mbox-body">
      <div class="tc-search">
        <input class="sc-input" id="tcSearch" type="text" placeholder="Search by city or state...">
        <button class="sc-submit" id="tcSearchBtn">Search</button>
      </div>
      <div id="tcGrid" class="tc-grid">
        <div class="empty-s"><div class="es-ico">ğŸ“·</div><div>Search for a city to load traffic cameras</div></div>
      </div>
    </div>
  </div>
</div>

<!-- SETTINGS MODAL -->
<div class="modal" id="settingsModal">
  <div class="mbox wide">
    <div class="mbox-head">
      <div class="mbox-title">âš™ Settings</div>
      <button class="mbox-x" id="sClose">âœ•</button>
    </div>
    <div class="mbox-body">

      <div class="s-sec">
        <div class="s-sec-title">Units</div>
        <div class="s-row"><span>Temperature</span>
          <div class="seg" id="sTempUnit">
            <button class="sb active" data-v="C">Â°C</button>
            <button class="sb" data-v="F">Â°F</button>
          </div>
        </div>
        <div class="s-row"><span>Wind Speed</span>
          <div class="seg" id="sWindUnit">
            <button class="sb active" data-v="ms">m/s</button>
            <button class="sb" data-v="kmh">km/h</button>
            <button class="sb" data-v="mph">mph</button>
          </div>
        </div>
        <div class="s-row"><span>Time Format</span>
          <div class="seg" id="sTimeFormat">
            <button class="sb active" data-v="12">12h</button>
            <button class="sb" data-v="24">24h</button>
          </div>
        </div>
      </div>

      <div class="s-sec">
        <div class="s-sec-title">Radar</div>
        <div class="s-row"><span>Opacity</span>
          <div class="slider-row">
            <input type="range" id="sOpacity" min="20" max="100" value="75">
            <span id="sOpacityVal">75%</span>
          </div>
        </div>
        <div class="s-row"><span>Animation Speed</span>
          <div class="seg" id="sSpeed">
            <button class="sb" data-v="300">Fast</button>
            <button class="sb active" data-v="600">Normal</button>
            <button class="sb" data-v="1000">Slow</button>
          </div>
        </div>
        <div class="s-row"><span>Color Scheme</span>
          <div class="seg" id="sRadarColor">
            <button class="sb" data-v="1">Original</button>
            <button class="sb" data-v="2">Universal</button>
            <button class="sb" data-v="4">Rainbow</button>
            <button class="sb active" data-v="6">NOAA</button>
          </div>
        </div>
        <div class="s-row"><span>Auto-play on Load</span>
          <label class="tog"><input type="checkbox" id="sAutoPlay"><span class="tog-t"></span></label>
        </div>
      </div>

      <div class="s-sec">
        <div class="s-sec-title">Map & Interaction</div>
        <div class="s-row"><span>Show Alert Zones</span>
          <label class="tog"><input type="checkbox" id="sAlertZones" checked><span class="tog-t"></span></label>
        </div>
        <div class="s-row"><span>Show Crosshair</span>
          <label class="tog"><input type="checkbox" id="sCrosshair" checked><span class="tog-t"></span></label>
        </div>
        <div class="s-row"><span>Map Click â†’ NWS Report</span>
          <label class="tog"><input type="checkbox" id="sClickAction" checked><span class="tog-t"></span></label>
        </div>
        <div class="s-row"><span>Weather Card Position</span>
          <div class="seg" id="sCardPos">
            <button class="sb active" data-v="top-left">â†– TL</button>
            <button class="sb" data-v="top-right">â†— TR</button>
            <button class="sb" data-v="bottom-left">â†™ BL</button>
          </div>
        </div>
      </div>

      <div class="s-sec">
        <div class="s-sec-title">Weather Card â€” Info Display</div>
        <div class="s-row"><span>Card Style</span>
          <div class="seg" id="sCardStyle">
            <button class="sb active" data-v="full">Full</button>
            <button class="sb" data-v="compact">Compact</button>
            <button class="sb" data-v="minimal">Minimal</button>
          </div>
        </div>
        <div class="s-fields-grid">
          <label class="s-field-tog"><input type="checkbox" id="sfHumidity" checked> Humidity</label>
          <label class="s-field-tog"><input type="checkbox" id="sfWind" checked> Wind</label>
          <label class="s-field-tog"><input type="checkbox" id="sfRain" checked> Rain</label>
          <label class="s-field-tog"><input type="checkbox" id="sfPressure" checked> Pressure</label>
          <label class="s-field-tog"><input type="checkbox" id="sfCloud" checked> Cloud Cover</label>
          <label class="s-field-tog"><input type="checkbox" id="sfUV" checked> UV Index</label>
          <label class="s-field-tog"><input type="checkbox" id="sfSunTimes" checked> Sunrise/Sunset</label>
          <label class="s-field-tog"><input type="checkbox" id="sfFeels" checked> Feels Like</label>
        </div>
      </div>

      <div class="s-sec">
        <div class="s-sec-title">About</div>
        <div class="about-box">
          <div>Storm Surge Weather <strong>v10.0</strong></div>
          <div>Radar â€” RainViewer API</div>
          <div>Forecast â€” Open-Meteo (free)</div>
          <div>Alerts + NWS Reports â€” weather.gov</div>
          <div>Maps â€” Mapbox GL JS</div>
          <div>Traffic â€” 511 State Systems</div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>
<div class="loader" id="loader"><div class="spin"></div><div class="load-txt">Loading...</div></div>

<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
<script>const MAPBOX_TOKEN = "pk.eyJ1Ijoic3Rvcm0tc3VyZ2UiLCJhIjoiY21scmM2Y3N3MDEzYjNmczViemZueTZuMSJ9.yHlnNztU7CgMaXUNuCzCrg";</script>
<script src="app.js"></script>
</body>
</html>Your